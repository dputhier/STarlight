--- 
title: "REPORT_TITLE"
subtitle: "REPORT_SUBTITLE"
author: "REPORT_AUT"
date: "REPORT_DATE"
site: bookdown::bookdown_site
output:
  bookdown::gitbook:
    css: style.css
    number_sections: false
    config:
      toc_depth: 1
      toc:
        collapse: section
    sharing:
        github: no
        facebook: no
        twitter: no
        all: no
documentclass: book
params:
  fig_path: "all_"
---


<!-- UPPERCASE variable are text to be replaced. -->
<!-- There are several global variables obtained from st_report() function. -->


```{r start, include=FALSE, echo=FALSE, eval=TRUE}
STarlight::set_verb_level(0)
library(knitr)
options(width=400)

knitr::opts_chunk$set(
  fig.path="FIG_PATH",
  fig.align = "center", 
  size = "tiny", 
  comment = "",
  fig.dpi=300,
  out.width="100%"
)
library(DT)
```

# {-}

```{r panel_setup_final, include = FALSE}
xaringanExtra::use_panelset()
xaringanExtra::style_panelset(font_family = "inherit")
xaringanExtra::style_panelset_tabs(foreground = "honeydew", background = "seagreen")
```

# General information {.panelset}

## Experiment 


```{r parameters, echo=FALSE, eval=TRUE}

t1 <- rbind(c("Title: ", "REPORT_TITLE"),
            c("Subtitle: ", "REPORT_SUBTITLE"),
            c("Author", "REPORT_AUT"),
            c("Date", "REPORT_DATE")
            )

knitr::kable(t1) %>% kableExtra::column_spec(1, bold = TRUE) %>%
  kableExtra::kable_styling() %>%
  kableExtra::scroll_box(width = "100%", box_css = "border: 0px;")
```

## Experimenters

```{r experimenters, echo=FALSE, eval=TRUE}

knitr::kable(experimenters) %>% 
  kableExtra::row_spec(1, bold = TRUE) %>% 
  kableExtra::kable_styling(full_width = FALSE, position = "left") %>%
  kableExtra::kable_styling() %>%
  kableExtra::scroll_box(width = "100%", box_css = "border: 0px;")
```

## Sample information  


```{r sample, echo=FALSE, eval=TRUE}

knitr::kable(sample_info) %>% 
  kableExtra::row_spec(1, bold = TRUE) %>% 
  kableExtra::kable_styling(full_width = FALSE, position = "left") %>%
  kableExtra::kable_styling() %>%
  kableExtra::scroll_box(width = "100%", box_css = "border: 0px;")
```

## Workflow parameters  


```{r parameters, echo=FALSE, eval=TRUE}

t1 <- rbind(c("Nb of modules: ", hc_tree_params[['class_nb']]),
            c("Image height: ", image_height)
            )

knitr::kable(t1) %>% kableExtra::column_spec(1, bold = TRUE) %>%
  kableExtra::kable_styling() %>%
  kableExtra::scroll_box(width = "100%", box_css = "border: 0px;")
```

# Counts {.panelset}

## Raw linear

```{r distributions_raw, echo=FALSE, eval=TRUE, fig.height=4.5}
STarlight::cmp_counts_st(st_grid_list, features=c("count_sum"))
```

## Raw log (log10)

```{r distributions_log, echo=FALSE, eval=TRUE, fig.height=4.5}
STarlight::cmp_counts_st(st_grid_list, features=c("count_sum"), 
                         transform = "log10")
```

# Count distributions {.panelset}

## Raw linear

```{r distributions_raw, echo=FALSE, eval=TRUE, fig.height=4.5}
STarlight::dist_st(st_grid_list) + Seurat::NoLegend()
```

## Raw log (log10)

```{r distributions_log, echo=FALSE, eval=TRUE, fig.height=4.5}
STarlight::dist_st(st_grid_list, transform="log10") + Seurat::NoLegend()
```

## Normalized (log10)

```{r distributions_norm, echo=FALSE, eval=TRUE, fig.height=4.5}
STarlight::dist_st(st_grid_list, 
                   transform="log10", 
                   normalized = TRUE) + Seurat::NoLegend()
```

# Comparisons

## todo

ezretr

